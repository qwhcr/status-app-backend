(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,t,a){e.exports=a(234)},140:function(e,t,a){},142:function(e,t,a){},233:function(e,t,a){},234:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(10),u=a.n(s),o=(a(140),a(15)),c=a.n(o),i=a(31),l=a(63),p=a(64),d=a(70),m=a(65),h=a(71),f=(a(142),a(238)),v=a(47),g=a(22),b=a(237),E=a(235),k=a(236),O=a(53),w=a.n(O),x=E.a.Title,j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).timeAgoFormatter=function(e,t){return e+" "+t},a.renderStatus=function(e){if("currentUser"===a.props.type){for(var t=0;t<a.props.data.statuses.length&&1!==a.props.data.statuses[t].selected;t++);return r.a.createElement(b.a.Group,{disabled:a.props.loading,buttonStyle:"solid",value:t,onChange:a.props.onStatusChange},a.props.data.statuses.map(function(n,s){return s==t?r.a.createElement("div",null,r.a.createElement(b.a.Button,{value:s,style:e},n.status_name+" for ",r.a.createElement(w.a,{date:1e3*n.selected_at,formatter:a.timeAgoFormatter}))):r.a.createElement("div",null,r.a.createElement(b.a.Button,{value:s,style:e},n.status_name))}))}if("otherOccupant"===a.props.type)return r.a.createElement(b.a.Group,{disabled:a.props.loading,buttonStyle:"solid",value:1},r.a.createElement("div",null,r.a.createElement(b.a.Button,{value:1,style:e},a.props.data.status.status_name+" for ",r.a.createElement(w.a,{date:1e3*a.props.data.status.selected_at,formatter:a.timeAgoFormatter}))))},a.state={name:null,quietLevel:null,loading:!1},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e;e=4===this.props.quietLevel?{backgroundColor:"rgb(46, 64, 89)"}:{};var t=null!=this.props.data?this.props.data.nickname:"";return r.a.createElement("div",null,r.a.createElement(k.a,{loading:this.props.loading,style:e},r.a.createElement(v.a,{type:"flex",align:"middle"},r.a.createElement(g.a,{span:12},r.a.createElement(x,null,t)),r.a.createElement(g.a,{span:12},this.renderStatus({margin:"15px",display:"block",height:"30px",lineHeight:"30px"})))))}}]),t}(n.Component),y=a(56),C=a.n(y),S="http://localhost:5000/api";"dev"!==Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_SOURCE&&(S="https://status-app.creat-ive.net/api");var _=S,U=a(24),D=a.n(U),N=a(11),A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).getData=Object(i.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get(_+"/status?userid="+a.state.currentUser+"&roomid=ed91a75f-68e0-4cc2-b453-1bb61571fc11",{headers:{Authorization:"Bearer "+a.state.token}});case 2:200==(t=e.sent).status&&a.setState({data:t.data,loading:!1}),401==t.status&&a.setState({token:null});case 5:case"end":return e.stop()}},e)})),a.onStatusChange=function(){var e=Object(i.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get(_+"/update?userid="+a.state.currentUser+"&roomid=ed91a75f-68e0-4cc2-b453-1bb61571fc11&statusname="+a.state.data.current_user.statuses[t.target.value].status_name,{headers:{Authorization:"Bearer "+a.state.token}});case 2:if(200!=(n=e.sent).status){e.next=6;break}return e.next=6,a.getData();case 6:return 401==n.status&&a.setState({token:null}),e.abrupt("return");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.renderOccupants=function(){var e=[];if(null!=a.state.data){var t=a.state.data.current_user;e.push(r.a.createElement(j,{data:t,type:"currentUser",onStatusChange:a.onStatusChange,loading:!1})),a.state.data.other_occupants.forEach(function(t){e.push(r.a.createElement(j,{data:t,type:"otherOccupant",loading:!1}))})}return e},a.state={data:null,loading:!0,token:D.a.get("default"),currentUser:D.a.get("currentUser")},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(c.a.mark(function e(){var t=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData();case 2:this.interval=setInterval(Object(i.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getData();case 2:case"end":return e.stop()}},e)})),3e4);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return null==this.state.token?(D.a.remove("default",{path:"/"}),r.a.createElement(N.a,{to:"/"})):null==this.state.data?r.a.createElement("div",{className:"Main"},r.a.createElement(j,{loading:this.state.loading})):r.a.createElement("div",{className:"Main"},this.renderOccupants(),r.a.createElement(v.a,{type:"flex",align:"middle",style:{marginTop:"10px",minHeight:"50px"}},r.a.createElement(g.a,{span:12},"Last Updated:",r.a.createElement(w.a,{date:Date.now()})),r.a.createElement(g.a,{span:12},r.a.createElement(f.a,{shape:"round",icon:"reload",onClick:this.getData},"Refresh"))),r.a.createElement(f.a,{onClick:function(){D.a.remove("default",{path:"/"}),D.a.remove("currentUser",{path:"/"}),e.setState({token:null})}}," logout "))}}]),t}(n.Component),B=a(72),I=a(52),L=(a(233),function(){var e=Object(i.a)(c.a.mark(function e(t,a){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post(_+"/auth/signin",{id:t,password:a});case 2:if(200===(n=e.sent).status){e.next=6;break}return console.log("not verified:",n),e.abrupt("return",null);case 6:return e.abrupt("return",n.data.token);case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());function P(){var e=Object(n.useState)(""),t=Object(B.a)(e,2),a=t[0],s=t[1],u=Object(n.useState)(""),o=Object(B.a)(u,2),l=o[0],p=o[1],d=Object(n.useState)(!1),m=Object(B.a)(d,2),h=m[0],f=m[1];return h||null!=D.a.get("default")?r.a.createElement(N.a,{to:"/main"}):r.a.createElement("div",{className:"joinOuterContainer"},r.a.createElement("div",{className:"joinInnerContainer"},r.a.createElement("h1",{className:"heading"},"Join"),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Username",className:"joinInput",type:"text",onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Password",className:"joinInput mt-20",type:"password",onChange:function(e){return p(e.target.value)}})),r.a.createElement(I.b,{onClick:function(){var e=Object(i.a)(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&l){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,L(a,l);case 4:if(null!==(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:(r=new Date).setDate(r.getDate()+30),D.a.set("default",n,{expires:30}),D.a.set("currentUser",a,{expires:30}),f(!0);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),to:"#"},r.a.createElement("button",{className:"button mt-20",type:"submit"},"Sign In"))))}var R=function(){return r.a.createElement(I.a,null,r.a.createElement(N.b,{path:"/",exact:!0,component:P}),r.a.createElement(N.b,{path:"/main",component:A}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[135,1,2]]]);
//# sourceMappingURL=main.01c5c66c.chunk.js.map